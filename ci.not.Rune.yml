app-id: ci.not.Rune
runtime: org.freedesktop.Platform
runtime-version: '24.08'
sdk: org.freedesktop.Sdk
command: rune
separate-locales: false
finish-args:
  - --share=ipc
  - --share=network
  - --socket=fallback-x11
  - --socket=wayland
  - --socket=pulseaudio
  - --device=dri
  - --filesystem=home
  - --own-name=org.mpris.MediaPlayer2.rune_player.*
  - --talk-name=org.kde.StatusNotifierWatcher
modules:
  - shared-modules/libayatana-appindicator/libayatana-appindicator-gtk3.json
  - name: rune
    buildsystem: simple
    build-commands:
      - /bin/bash -c 'tools/install-assets.sh'
    sources:
      - type: archive
        only-arches:
          - aarch64
        url: https://github.com/Losses/rune/releases/download/v1.0.0-beta.3/Rune-v1.0.0-beta.3-linux-aarch64.zip
        sha256: 63a027a4e3abee234c8be31536a09c39a429a79fcaa40b3efdf63bde7721f061
        strip-components: 0
        dest: release
        x-checker-data:
          type: json
          url: https://api.github.com/repos/Losses/rune/releases/latest
          version-query: .tag_name
          url-query: '"https://github.com/Losses/rune/releases/download/" + $version
            + "/Rune-" + $version + "-linux-aarch64.zip"'
      - type: archive
        only-arches:
          - x86_64
        url: https://github.com/Losses/rune/releases/download/v1.0.0-beta.3/Rune-v1.0.0-beta.3-linux-amd64.zip
        sha256: ee54905e4f078f0b8fd4ce5c3e4e8d7865b79572ea4da9c881bdd274fdbdcbe6
        strip-components: 0
        dest: release
        x-checker-data:
          type: json
          url: https://api.github.com/repos/Losses/rune/releases/latest
          version-query: .tag_name
          url-query: '"https://github.com/Losses/rune/releases/download/" + $version
            + "/Rune-" + $version + "-linux-amd64.zip"'
      - type: file
        url: https://raw.githubusercontent.com/Losses/rune/refs/tags/v1.0.0-beta.3/assets/icons/Papirus/16x16/apps/rune.png
        sha256: 310f60f8d1965bf19c660bf9c4bdcacac89695b7bc37f029e52d37dd35724002
        dest-filename: rune-16x16.png
        x-checker-data:
          type: json
          url: https://api.github.com/repos/Losses/rune/releases/latest
          version-query: .tag_name
          url-query: '"https://raw.githubusercontent.com/Losses/rune/refs/tags/" +
            $version + "/assets/icons/Papirus/16x16/apps/rune.png"'
      - type: file
        url: https://raw.githubusercontent.com/Losses/rune/refs/tags/v1.0.0-beta.3/assets/icons/Papirus/32x32/apps/rune.png
        sha256: 5930d975bec5ec2acee0849d6c66725e005eefebbf2c3eab5eb2a522d5d77c76
        dest-filename: rune-32x32.png
        x-checker-data:
          type: json
          url: https://api.github.com/repos/Losses/rune/releases/latest
          version-query: .tag_name
          url-query: '"https://raw.githubusercontent.com/Losses/rune/refs/tags/" +
            $version + "/assets/icons/Papirus/32x32/apps/rune.png"'
      - type: file
        url: https://raw.githubusercontent.com/Losses/rune/refs/tags/v1.0.0-beta.3/assets/icons/Papirus/64x64/apps/rune.png
        sha256: c49e4d11aa4ee7bb266b4380ab87322986c0fe1c742a64656f60da8126c79147
        dest-filename: rune-64x64.png
        x-checker-data:
          type: json
          url: https://api.github.com/repos/Losses/rune/releases/latest
          version-query: .tag_name
          url-query: '"https://raw.githubusercontent.com/Losses/rune/refs/tags/" +
            $version + "/assets/icons/Papirus/64x64/apps/rune.png"'
      - type: file
        url: https://raw.githubusercontent.com/Losses/rune/refs/tags/v1.0.0-beta.3/assets/icons/Papirus/128x128/apps/rune.png
        sha256: 18058cd8e3e99ef92a847d10ee3d3020f8d41493de8deb1a19852603ef38ab3a
        dest-filename: rune-128x128.png
        x-checker-data:
          type: json
          url: https://api.github.com/repos/Losses/rune/releases/latest
          version-query: .tag_name
          url-query: '"https://raw.githubusercontent.com/Losses/rune/refs/tags/" +
            $version + "/assets/icons/Papirus/128x128/apps/rune.png"'
      - type: file
        url: https://raw.githubusercontent.com/Losses/rune/refs/tags/v1.0.0-beta.3/assets/icons/Papirus/256x256/apps/rune.png
        sha256: b24b781fc123cd905aa254fa2581656d1c0903a62cbc7fb4af3c646f9fe6128b
        dest-filename: rune-256x256.png
        x-checker-data:
          type: json
          url: https://api.github.com/repos/Losses/rune/releases/latest
          version-query: .tag_name
          url-query: '"https://raw.githubusercontent.com/Losses/rune/refs/tags/" +
            $version + "/assets/icons/Papirus/256x256/apps/rune.png"'
      - type: file
        url: https://raw.githubusercontent.com/Losses/rune/refs/tags/v1.0.0-beta.3/assets/icons/Papirus/512x512/apps/rune.png
        sha256: 198b56c4b99a3aab7318466ed41ea444c7808dd0b33de04d1485834fe2185c30
        dest-filename: rune-512x512.png
        x-checker-data:
          type: json
          url: https://api.github.com/repos/Losses/rune/releases/latest
          version-query: .tag_name
          url-query: '"https://raw.githubusercontent.com/Losses/rune/refs/tags/" +
            $version + "/assets/icons/Papirus/512x512/apps/rune.png"'
      - type: dir
        path: .
        dest: tools
